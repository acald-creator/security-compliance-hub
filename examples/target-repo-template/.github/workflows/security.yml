name: Security Compliance

# Default permissions: grant the workflow the minimal elevated permissions needed
# for signing and uploading provenance when enabled. Callers running this
# workflow will grant these permissions in their repo; remove or restrict
# these if you do not want to allow write operations from the workflow.
permissions:
  id-token: write
  contents: write
  packages: write

on:
  push:
    branches: [main, develop]
  pull_request:
  schedule:
    - cron: '0 0 * * 0' # Weekly scan

jobs:
  security:
    uses: acald-creator/security-compliance-hub/.github/workflows/security-scan.yml@main
    with:
      severity-threshold: HIGH
      compliance-frameworks: openssf,owasp,slsa
      enable-signing: true
    secrets: inherit

  devsecops:
    uses: acald-creator/security-compliance-hub/.github/workflows/devsecops-infinity.yml@main
    with:
      phase: all
    secrets: inherit
